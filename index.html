<html>
  <head>
    <title>Movie Sound Analyzer</title>
    <meta charset="UTF-8">
    <meta name="description" content="動画の音声のラウドネス値とピークレベルを計測します。">
    <link rel="icon" href="/favicon.ico" sizes="32x32">
    <link rel="stylesheet" href="style.css">
    <script src="/MovieSoundAnalyzer/assets/ffmpeg/package/dist/umd/ffmpeg.js"></script>
    <script src="/MovieSoundAnalyzer/assets/util/package/dist/umd/index.js"></script>
  </head>
  <body>
    <h1>Movie Sound Analyzer</h1>

    <!-- ドラッグ＆ドロップエリア -->
    <div id="dropZone" style="border: 2px dashed #aaa; padding: 20px; text-align: center;">
      動画ファイル（制限：2GB以下）をここにドラッグ＆ドロップ、<br>または
      <input type="file" id="fileInput" accept="video/*" hidden>
      <button onclick="document.getElementById('fileInput').click();">ファイルを選択</button>
    </div>

    <p id="state">プログラムの準備中</p>

    <p>ラウドネス：<span id="loudness">0.0</span> LUFS、ピーク値：<span id="peak_db">0.0</span> dB</p>

    <video id="video" controls></video>

    <!-- リンク -->
    <div id="terms-link-container">
      <a id="terms-link">説明・利用規約</a>
    </div>

    <!-- ポップアップ内容 -->
    <div id="terms-popup">
      <div class="popup-content">
          <span class="close">&times;</span>
          <h2>説明</h2>
          <p>
            動画ファイルのラウドネス値とデシベルレベルのピーク値を表示します。<br>
          </p>
          </p>
          <p>このWebアプリのソースコードは<a target="_blank" href="https://github.com/SoundAdjuster/MovieSoundAnalyzer">GitHub</a>で公開されています。</p>
          <h2>利用規約</h2>
          <p>
            簡易的なテストは行っておりますが、誤った値が表示される可能性はあります。<br>
            音声品質に対する評価は最終的に自身で行うようお願いいたします。<br>
            また、開発者から当ウェブアプリの利用に関して損害などを補償することは一切ございません。
          </p>
      </div>
    </div>


    <script>
      // 利用規約の挙動に関するscript
      document.getElementById('terms-link').onclick = function() {
          document.getElementById('terms-popup').style.display = 'block';
      }

      document.getElementsByClassName('close')[0].onclick = function() {
          document.getElementById('terms-popup').style.display = 'none';
      }

      window.onclick = function(event) {
          if (event.target == document.getElementById('terms-popup')) {
              document.getElementById('terms-popup').style.display = 'none';
          }
      }
      </script>

    <script src="app.js"></script>
  </body>
</html>
